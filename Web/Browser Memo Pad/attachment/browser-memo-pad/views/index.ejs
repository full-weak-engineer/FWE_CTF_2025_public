<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <title>Report to Admin Bot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <style></style>
  </head>
  <body class="">
    <div class="container mt-5 p-4">
      <div class="row">
        <div class="col-md-12">
          <h1 class="text-center mb-4">Report to Admin Bot</h1>
          <h2 class="h4 mt-4">URL:</h2>
          <form class="input-group mb-3" id="form">
            <input
              type="text"
              class="form-control"
              placeholder="http://example.com/"
              aria-label="ID"
              id="url"
            />
            <button class="btn btn-primary" type="button" id="report">Report</button>
          </form>
          <p id="response"></p>
        </div>
      </div>
    </div>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>
    <script>
      function toggleDarkMode() {
        if (
          window.matchMedia &&
          window.matchMedia("(prefers-color-scheme: dark)").matches
        ) {
          document.documentElement.setAttribute("data-bs-theme", "dark");
        } else {
          document.documentElement.setAttribute("data-bs-theme", "light");
        }
      }

      window
        .matchMedia("(prefers-color-scheme: dark)")
        .addEventListener("change", toggleDarkMode);

      toggleDarkMode();
      window.addEventListener("load", () => {

        const $form = document.getElementById("form");
        const $response = document.getElementById("response");
        const $url = document.getElementById("url");

        document.getElementById("report").addEventListener("click", async () => {
          const url = $url.value;
          if (!url) {
            $response.textContent = "Please enter a URL";
            return;
          }
          $form.setAttribute("disabled", true);
          $response.textContent = "Response from bot: " + await(await fetch("/api/report", {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({ url }),
          })).text();
          $form.setAttribute("disabled", false);

        });
      });
    </script>
  </body>
</html>
